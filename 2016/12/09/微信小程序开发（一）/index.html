
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>微信小程序开发（一） | Fantastic</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="张金玲">
    

    
    <meta name="description" content="前段时间，微信小程序突然火了，朋友圈被刷屏了。但由于某些原因，博主一直没有了解它，终于在昨天，抽了些时间了解了下小程序，主要是阅读了官方文档，之后博主觉得，小程序还是蛮有意思的，于是决定将自己的学习过程记录下来，也希望能够和同样对微信小程序感兴趣的朋友们多多交流。
以下内容主要来自于官方文档。
微信小程序简介下面是官方给出的关于微信小程序的介绍：
微信小程序是一种全新的连接用户与服务的方式，它可以">
<meta property="og:type" content="article">
<meta property="og:title" content="微信小程序开发（一）">
<meta property="og:url" content="https://fantasticzhang.github.io/2016/12/09/微信小程序开发（一）/index.html">
<meta property="og:site_name" content="Fantastic">
<meta property="og:description" content="前段时间，微信小程序突然火了，朋友圈被刷屏了。但由于某些原因，博主一直没有了解它，终于在昨天，抽了些时间了解了下小程序，主要是阅读了官方文档，之后博主觉得，小程序还是蛮有意思的，于是决定将自己的学习过程记录下来，也希望能够和同样对微信小程序感兴趣的朋友们多多交流。
以下内容主要来自于官方文档。
微信小程序简介下面是官方给出的关于微信小程序的介绍：
微信小程序是一种全新的连接用户与服务的方式，它可以">
<meta property="og:image" content="https://fantasticzhang.github.io/images/2016-12-9/1.png">
<meta property="og:image" content="https://fantasticzhang.github.io/images/2016-12-9/2.PNG">
<meta property="og:image" content="https://fantasticzhang.github.io/images/2016-12-9/3.PNG">
<meta property="og:image" content="https://fantasticzhang.github.io/images/2016-12-9/4.PNG">
<meta property="og:image" content="https://fantasticzhang.github.io/images/2016-12-9/5.PNG">
<meta property="og:image" content="https://fantasticzhang.github.io/images/2016-12-9/6.PNG">
<meta property="og:image" content="https://fantasticzhang.github.io/images/2016-12-9/7.PNG">
<meta property="og:image" content="https://fantasticzhang.github.io/images/2016-12-9/8.PNG">
<meta property="og:image" content="https://fantasticzhang.github.io/images/2016-12-9/9.PNG">
<meta property="og:image" content="https://fantasticzhang.github.io/images/2016-12-9/10.PNG">
<meta property="og:image" content="https://fantasticzhang.github.io/images/2016-12-9/11.PNG">
<meta property="og:updated_time" content="2016-12-22T09:28:23.661Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="微信小程序开发（一）">
<meta name="twitter:description" content="前段时间，微信小程序突然火了，朋友圈被刷屏了。但由于某些原因，博主一直没有了解它，终于在昨天，抽了些时间了解了下小程序，主要是阅读了官方文档，之后博主觉得，小程序还是蛮有意思的，于是决定将自己的学习过程记录下来，也希望能够和同样对微信小程序感兴趣的朋友们多多交流。
以下内容主要来自于官方文档。
微信小程序简介下面是官方给出的关于微信小程序的介绍：
微信小程序是一种全新的连接用户与服务的方式，它可以">
<meta name="twitter:image" content="https://fantasticzhang.github.io/images/2016-12-9/1.png">
<meta name="twitter:creator" content="@fantastic_zjl">

    
    <link rel="alternative" href="atom.xml" title="Fantastic" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/unnamed4_n_mSY_icon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/logo.png">
    <link rel="apple-touch-icon-precomposed" href="/img/logo.png">
    
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/search.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Fantastic" title="Fantastic"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Fantastic">Fantastic</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/about">关于</a></li>
					
						<li><a href="/photos">相册</a></li>
					
					<li>
 					
					<!-- <form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:fantasticzhang.github.io">
					</form> -->

					<!--自定义本地搜索 2016。11.29-->
						<div id="site_search">
							<input type="text" id="local-search-input" name="q" results="0" autocomplete="off" maxlength="20" placeholder="搜索博客" class="form-control"/>
							<div id="local-search-result"></div>
						</div>
					
					</li>
				</ul>
			</nav>
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/12/09/微信小程序开发（一）/" title="微信小程序开发（一）" itemprop="url">微信小程序开发（一）</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="张金玲" target="_blank" itemprop="author">张金玲</a>
		
  <p class="article-time">
    <time datetime="2016-12-09T01:27:11.000Z" itemprop="datePublished"> 发表于 2016-12-09</time>
    <span class="head-plus">
   &nbsp;|&nbsp;<i class="fa fa-comments"></i><span class="ds-thread-count" data-thread-key="2016/12/09/微信小程序开发（一）/"><i class="fa fa-spinner fa-spin"></i></span>
   </span>
  </p>


</header>

	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#微信小程序简介"><span class="toc-number">1.</span> <span class="toc-text">微信小程序简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#小程序注册"><span class="toc-number">2.</span> <span class="toc-text">小程序注册</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#快速体验"><span class="toc-number">3.</span> <span class="toc-text">快速体验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#获取微信小程序的AppID"><span class="toc-number">3.1.</span> <span class="toc-text">获取微信小程序的AppID</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#创建项目"><span class="toc-number">3.2.</span> <span class="toc-text">创建项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#项目结构简介"><span class="toc-number">3.3.</span> <span class="toc-text">项目结构简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#手机预览"><span class="toc-number">3.4.</span> <span class="toc-text">手机预览</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#小程序开发框架"><span class="toc-number">4.</span> <span class="toc-text">小程序开发框架</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#目录结构"><span class="toc-number">4.1.</span> <span class="toc-text">目录结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置"><span class="toc-number">4.2.</span> <span class="toc-text">配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#app-json"><span class="toc-number">4.2.1.</span> <span class="toc-text">app.json</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pages"><span class="toc-number">4.2.1.1.</span> <span class="toc-text">pages</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#window"><span class="toc-number">4.2.1.2.</span> <span class="toc-text">window</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tabBar"><span class="toc-number">4.2.1.3.</span> <span class="toc-text">tabBar</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#networkTimeout"><span class="toc-number">4.2.1.4.</span> <span class="toc-text">networkTimeout</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#debug"><span class="toc-number">4.2.1.5.</span> <span class="toc-text">debug</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#page-json"><span class="toc-number">4.2.2.</span> <span class="toc-text">page.json</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#逻辑层"><span class="toc-number">4.3.</span> <span class="toc-text">逻辑层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#注册程序"><span class="toc-number">4.3.1.</span> <span class="toc-text">注册程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#注册页面"><span class="toc-number">4.3.2.</span> <span class="toc-text">注册页面</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Page-prototype-setData"><span class="toc-number">4.3.2.1.</span> <span class="toc-text">Page.prototype.setData()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模块化"><span class="toc-number">4.3.3.</span> <span class="toc-text">模块化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#视图层"><span class="toc-number">4.4.</span> <span class="toc-text">视图层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#WXML"><span class="toc-number">4.4.1.</span> <span class="toc-text">WXML</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#数据绑定"><span class="toc-number">4.4.1.1.</span> <span class="toc-text">数据绑定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#条件渲染"><span class="toc-number">4.4.1.2.</span> <span class="toc-text">条件渲染</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#列表渲染"><span class="toc-number">4.4.1.3.</span> <span class="toc-text">列表渲染</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#模板"><span class="toc-number">4.4.1.4.</span> <span class="toc-text">模板</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#事件"><span class="toc-number">4.4.1.5.</span> <span class="toc-text">事件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#事件分类"><span class="toc-number">4.4.1.5.1.</span> <span class="toc-text">事件分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#事件绑定"><span class="toc-number">4.4.1.5.2.</span> <span class="toc-text">事件绑定</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#事件对象"><span class="toc-number">4.4.1.5.3.</span> <span class="toc-text">事件对象</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#引用"><span class="toc-number">4.4.1.6.</span> <span class="toc-text">引用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WXSS"><span class="toc-number">4.4.2.</span> <span class="toc-text">WXSS</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#尺寸单位"><span class="toc-number">4.4.2.1.</span> <span class="toc-text">尺寸单位</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#样式导入"><span class="toc-number">4.4.2.2.</span> <span class="toc-text">样式导入</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#组件和API"><span class="toc-number">4.5.</span> <span class="toc-text">组件和API</span></a></li></ol></li></ol>
		
		</div>
		
		<p>前段时间，微信小程序突然火了，朋友圈被刷屏了。但由于某些原因，博主一直没有了解它，终于在昨天，抽了些时间了解了下小程序，主要是阅读了官方文档，之后博主觉得，小程序还是蛮有意思的，于是决定将自己的学习过程记录下来，也希望能够和同样对微信小程序感兴趣的朋友们多多交流。</p>
<p>以下内容主要来自于<a href="https://mp.weixin.qq.com/debug/wxadoc/introduction/index.html?t=1481249514" title="小程序官方文档" target="_blank" rel="external">官方文档</a>。</p>
<h1 id="微信小程序简介"><a href="#微信小程序简介" class="headerlink" title="微信小程序简介"></a>微信小程序简介</h1><p>下面是官方给出的关于微信小程序的介绍：</p>
<p>微信小程序是一种全新的连接用户与服务的方式，它可以在微信内被便捷地获取和传播，同时具有出色的使用体验。小程序是一种不需要下载安装即可使用的应用，它实现了应用“触手可及”的梦想，用户扫一扫或者搜一下即可打开应用。也体现了“用完即走”的理念，用户不用关心是否安装太多应用的问题。应用将无处不在，随时可用，但又无需安装卸载。小程序、订阅号、服务号、企业号是并行的体系。</p>
<p>由官方的表述来看，通俗一点的说，微信小程序其实就是微信提高了自身对HTML5特性的支持能力，开放了更多的系统调用。因此，微信里的HTML5产品将有更好的用户体验，更快的加载速度以及更多的功能。</p>
<h1 id="小程序注册"><a href="#小程序注册" class="headerlink" title="小程序注册"></a>小程序注册</h1><p>目前，微信小程序只开放了对企业、政府、媒体以及其他组织的注册，并没有开放对个人开发者的注册，那么个人如何注册小程序并进行学习呢？博主主要是参考了网上的一个方法，亲测可用。<a href="https://www.zhihu.com/question/52268924" target="_blank" rel="external">参考链接</a></p>
<h1 id="快速体验"><a href="#快速体验" class="headerlink" title="快速体验"></a>快速体验</h1><p>下面是官方文档给出的一个简易教程，这个小程序的首页将会显示欢迎语以及当前用户的微信头像，点击头像，可以在新开的页面中查看当前小程序的启动日志。</p>
<p>注：以下教程默认注册账号、开发者、体验者都是使用管理员微信号。</p>
<h2 id="获取微信小程序的AppID"><a href="#获取微信小程序的AppID" class="headerlink" title="获取微信小程序的AppID"></a>获取微信小程序的AppID</h2><p>注册微信小程序并登录后，就可以在网站的“设置”-“开发者设置”中，查看到微信小程序的AppID了。</p>
<p><img src="/images/2016-12-9/1.png" alt=""></p>
<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><p>我们需要通过<a href="https://mp.weixin.qq.com/debug/wxadoc/dev/devtools/devtools.html?t=20161122" target="_blank" rel="external">开发者工具</a>，来完成小程序创建和代码编辑。</p>
<p>开发者工具安装完成后，打开并使用微信扫码登录。选择创建“项目”，填入上文获取到的 AppID ，设置一个本地项目的名称（非小程序名称），比如“firstProject”，并选择一个本地的文件夹作为代码存储的目录，点击“新建项目”就可以了。</p>
<p>为方便初学者了解微信小程序的基本代码结构，在创建过程中，如果选择的本地文件夹是个空文件夹，开发者工具会提示，是否需要创建一个 quick start 项目。选择“是”，开发者工具会帮助我们在开发目录里生成一个简单的 demo。</p>
<p>项目创建成功后，我们就可以点击该项目，进入并看到完整的开发者工具界面，点击左侧导航，在“编辑”里可以查看和编辑我们的代码，在“调试”里可以测试代码并模拟小程序在微信客户端效果，在“项目”里可以发送到手机里预览实际效果。默认demo运行结果如下：</p>
<p><img src="/images/2016-12-9/2.PNG" alt=""></p>
<h2 id="项目结构简介"><a href="#项目结构简介" class="headerlink" title="项目结构简介"></a>项目结构简介</h2><p>点击开发者工具左侧导航的“编辑”，我们可以看到这个项目，已经初始化并包含了一些简单的代码文件。最关键也是必不可少的，是 app.js、app.json、app.wxss 这三个。其中，.js后缀的是脚本文件，.json后缀的文件是配置文件，.wxss后缀的是样式表文件。微信小程序会读取这些文件，并生成小程序实例。</p>
<p>下面简单介绍下这三个文件的功能。</p>
<ul>
<li><p>app.js是小程序的脚本代码。我们可以在这个文件中监听并处理小程序的生命周期函数、声明全局变量。调用框架提供的丰富的 API，如本例的同步存储及同步读取本地数据。</p>
<pre><code>//app.js
App({
  onLaunch: function () {
    //调用API从本地缓存中获取数据
    var logs = wx.getStorageSync(&apos;logs&apos;) || []
    logs.unshift(Date.now())
    wx.setStorageSync(&apos;logs&apos;, logs)
  },
  getUserInfo:function(cb){
    var that = this
    if(this.globalData.userInfo){
      typeof cb == &quot;function&quot; &amp;&amp; cb(this.globalData.userInfo)
    }else{
      //调用登录接口
      wx.login({
        success: function () {
          wx.getUserInfo({
            success: function (res) {
              that.globalData.userInfo = res.userInfo
              typeof cb == &quot;function&quot; &amp;&amp; cb(that.globalData.userInfo)
            }
          })
        }
      })
    }
  },
  globalData:{
    userInfo:null
  }
})
</code></pre></li>
<li><p>app.json 是对整个小程序的全局配置。我们可以在这个文件中配置小程序是由哪些页面组成，配置小程序的窗口背景色，配置导航条样式，配置默认标题。注意该文件不可添加任何注释。</p>
<pre><code>{
  &quot;pages&quot;:[
    &quot;pages/index/index&quot;,
    &quot;pages/logs/logs&quot;
  ],
  &quot;window&quot;:{
    &quot;backgroundTextStyle&quot;:&quot;light&quot;,
    &quot;navigationBarBackgroundColor&quot;: &quot;#fff&quot;,
    &quot;navigationBarTitleText&quot;: &quot;WeChat&quot;,
    &quot;navigationBarTextStyle&quot;:&quot;black&quot;
  },
  &quot;tabBar&quot;: {
    &quot;position&quot;: &quot;bottom&quot;,
    &quot;list&quot;: [{
      &quot;pagePath&quot;: &quot;pages/index/index&quot;,
      &quot;text&quot;: &quot;首页&quot;
    }, {
      &quot;pagePath&quot;: &quot;pages/logs/logs&quot;,
      &quot;text&quot;: &quot;日志&quot;
    }]
  },
  &quot;networkTimeout&quot;: {
    &quot;request&quot;: 10000,
    &quot;downloadFile&quot;: 10000
  },
  &quot;debug&quot;: true
}
</code></pre></li>
<li><p>app.wxss 是整个小程序的公共样式表。我们可以在页面组件的 class 属性上直接使用 app.wxss 中声明的样式规则。</p>
<pre><code>/**app.wxss**/
.container {
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  padding: 200rpx 0;
  box-sizing: border-box;
} 
</code></pre></li>
</ul>
<p>在这个教程里，我们有两个页面，index 页面和 logs 页面，即欢迎页和小程序启动日志的展示页，他们都在 pages 目录下。微信小程序中的每一个页面的【路径+页面名】都需要写在 app.json 的 pages 中，且 pages 中的第一个页面是小程序的首页。</p>
<p>每一个小程序页面是由同路径下同名的四个不同后缀文件的组成：</p>
<ul>
<li><p>.js后缀的文件是页面的脚本文件，在这个文件中我们可以监听并处理页面的生命周期函数、获取小程序实例，声明并处理数据，响应页面交互事件等。</p>
</li>
<li><p>.json后缀的文件是页面的配置文件，它是非必要的。当有页面的配置文件时，配置项在该页面会覆盖 app.json 的 window 中相同的配置项。如果没有指定的页面配置文件，则在该页面直接使用 app.json 中的默认配置。</p>
</li>
<li><p>.wxss后缀的是页面的样式表文件，它也是非必要的。当有页面样式表时，页面的样式表中的样式规则会层叠覆盖 app.wxss 中的样式规则。如果不指定页面的样式表，也可以在页面的结构文件中直接使用 app.wxss 中指定的样式规则。</p>
</li>
<li><p>.wxml后缀的文件是页面结构文件，用来搭建页面结构，绑定数据和交互处理函数。</p>
</li>
</ul>
<p>以上就是页面结构的简单介绍，在小程序开发框架一节中还会对这部分内容进行详细介绍。</p>
<h2 id="手机预览"><a href="#手机预览" class="headerlink" title="手机预览"></a>手机预览</h2><p>开发者工具左侧菜单栏选择”项目”，点击”预览”，扫码后即可在微信客户端中体验。</p>
<p><img src="/images/2016-12-9/3.PNG" alt=""></p>
<h1 id="小程序开发框架"><a href="#小程序开发框架" class="headerlink" title="小程序开发框架"></a>小程序开发框架</h1><p>小程序开发框架的目标是通过尽可能简单、高效的方式让开发者可以在微信中开发具有原生 APP 体验的服务。</p>
<p>框架提供了自己的视图层描述语言 WXML 和 WXSS，以及基于 JavaScript 的逻辑层框架，并在视图层与逻辑层间提供了数据传输和事件系统，可以让开发者可以方便的聚焦于数据与逻辑上。</p>
<p>下面将从目录结构、配置、逻辑层和视图层四个方面对小程序开发框架进行介绍。</p>
<h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><p>小程序包含一个描述整体程序的 app 和多个描述各自页面的 page。在上一节中我们已经对目录结构进行了简单的了解。</p>
<ul>
<li><p>一个小程序主体部分由三个文件组成，必须放在项目的根目录，分别是：app.js、app.json、app.wxss 。其中，app.js是小程序的脚本代码，用来控制小程序的逻辑，它是必要的；app.json是对整个小程序的全局配置，它也是必要的；app.wxss是整个小程序的公共样式表，它是非必要的。</p>
</li>
<li><p>一个小程序页面由四个文件组成，分别是：.js、.json、.wxss、.wxml四个文件。其中.js后缀的文件是页面脚本文件，用来控制页面逻辑；.json后缀的文件是页面配置文件；.wxss后缀的是页面样式表文件；.wxml后缀的文件是页面结构文件。.js文件和.wxml文件是必要的，另外两个文件是非必要的。</p>
</li>
</ul>
<p>注意：为了方便开发者减少配置项，规定描述页面的这四个文件必须具有相同的路径与文件名。</p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="app-json"><a href="#app-json" class="headerlink" title="app.json"></a>app.json</h3><p>app.json文件用来对微信小程序进行全局配置，决定页面文件的路径、窗口表现、设置网络超时时间、设置多 tab 等。</p>
<p>以下是一个包含了所有配置选项的简单配置app.json ：</p>
<pre><code>{
  &quot;pages&quot;: [
    &quot;pages/index/index&quot;,
    &quot;pages/logs/index&quot;
  ],
  &quot;window&quot;: {
    &quot;navigationBarTitleText&quot;: &quot;Demo&quot;
  },
  &quot;tabBar&quot;: {
    &quot;list&quot;: [{
      &quot;pagePath&quot;: &quot;pages/index/index&quot;,
      &quot;text&quot;: &quot;首页&quot;
    }, {
      &quot;pagePath&quot;: &quot;pages/logs/logs&quot;,
      &quot;text&quot;: &quot;日志&quot;
    }]
  },
  &quot;networkTimeout&quot;: {
    &quot;request&quot;: 10000,
    &quot;downloadFile&quot;: 10000
  },
  &quot;debug&quot;: true
}
</code></pre><p>app.json 配置项列表</p>
<p><img src="/images/2016-12-9/4.PNG" alt=""></p>
<p>下面对这些配置项进行简单介绍。</p>
<h4 id="pages"><a href="#pages" class="headerlink" title="pages"></a>pages</h4><p>接受一个数组，每一项都是字符串，来指定小程序由哪些页面组成。每一项代表对应页面的【路径+文件名】信息，数组的第一项代表小程序的初始页面。小程序中新增/减少页面，都需要对 pages 数组进行修改。</p>
<p>文件名不需要写文件后缀，因为框架会自动去寻找路径.json,.js,.wxml,.wxss的四个文件进行整合。</p>
<h4 id="window"><a href="#window" class="headerlink" title="window"></a>window</h4><p>用于设置小程序的状态栏、导航条、标题、窗口背景色。</p>
<p><img src="/images/2016-12-9/5.PNG" alt=""></p>
<h4 id="tabBar"><a href="#tabBar" class="headerlink" title="tabBar"></a>tabBar</h4><p>如果我们的小程序是一个多 tab 应用（客户端窗口的底部有tab栏可以切换页面），那么我们可以通过 tabBar 配置项指定 tab 栏的表现，以及 tab 切换时显示的对应页面。</p>
<p>tabBar 是一个数组，只能配置最少2个、最多5个 tab，tab 按数组的顺序排序。</p>
<p>属性如下：</p>
<p><img src="/images/2016-12-9/6.PNG" alt=""></p>
<p>其中 list 接受一个数组，数组中的每个项都是一个对象，其属性值如下：</p>
<p><img src="/images/2016-12-9/7.PNG" alt=""></p>
<h4 id="networkTimeout"><a href="#networkTimeout" class="headerlink" title="networkTimeout"></a>networkTimeout</h4><p>可以设置各种网络请求的超时时间。</p>
<p>属性值如下：</p>
<p><img src="/images/2016-12-9/8.PNG" alt=""></p>
<h4 id="debug"><a href="#debug" class="headerlink" title="debug"></a>debug</h4><p>可以在开发者工具中开启 debug 模式，在开发者工具的控制台面板，调试信息以 info 的形式给出，其信息有Page的注册，页面路由，数据更新，事件触发。可以帮助开发者快速定位一些常见的问题。</p>
<h3 id="page-json"><a href="#page-json" class="headerlink" title="page.json"></a>page.json</h3><p>每一个小程序页面也可以使用.json文件来对本页面的窗口表现进行配置。 页面的配置比app.json全局配置简单得多，只是设置 app.json 中的 window 配置项的内容，页面中配置项会覆盖 app.json 的 window 中相同的配置项。由于页面的配置只能设置 window 相关的配置项，以决定本页面的窗口表现，所以无需写 window 这个键，下面是一个简单的例子：</p>
<pre><code>{
  &quot;navigationBarBackgroundColor&quot;: &quot;#ffffff&quot;,
  &quot;navigationBarTextStyle&quot;: &quot;black&quot;,
  &quot;navigationBarTitleText&quot;: &quot;微信接口功能演示&quot;,
  &quot;backgroundColor&quot;: &quot;#eeeeee&quot;,
  &quot;backgroundTextStyle&quot;: &quot;light&quot;
}
</code></pre><h2 id="逻辑层"><a href="#逻辑层" class="headerlink" title="逻辑层"></a>逻辑层</h2><p>小程序开发框架的逻辑层是由JavaScript编写，为了方便地开发小程序，在JavaScript的基础上做了一些修改，主要如下：</p>
<ul>
<li>增加App和Page方法，进行程序和页面注册；</li>
<li>增加getApp和getCurrentPages方法，分别用来获取App实例和当前页面栈；</li>
<li>由于框架并非运行在浏览器中，所以 JavaScript 在 web 中一些能力都无法使用，如 document，window 等;</li>
<li>每个页面有独立的作用域，并提供模块化能力;</li>
<li>提供丰富的 API;</li>
<li>开发者写的所有代码最终将会打包成一份 JavaScript，并在小程序启动的时候运行，直到小程序销毁。类似 ServiceWorker，所以逻辑层也称之为 App Service。</li>
</ul>
<h3 id="注册程序"><a href="#注册程序" class="headerlink" title="注册程序"></a>注册程序</h3><p>App() 函数用来注册一个小程序。接受一个 object 参数，其指定小程序的生命周期函数等。</p>
<p>object参数说明：</p>
<p><img src="/images/2016-12-9/9.PNG" alt=""></p>
<p>注： 当用户点击左上角关闭，或者按了设备 Home 键离开微信，小程序并没有直接销毁，而是进入了后台；当再次进入微信或再次打开小程序，又会从后台进入前台。只有当小程序进入后台一定时间，或者系统资源占用过高，才会被真正的销毁。</p>
<h3 id="注册页面"><a href="#注册页面" class="headerlink" title="注册页面"></a>注册页面</h3><p>Page() 函数用来注册一个页面。接受一个 object 参数，其指定页面的初始数据、生命周期函数、事件处理函数等。</p>
<p>object参数说明：</p>
<p><img src="/images/2016-12-9/10.PNG" alt=""></p>
<h4 id="Page-prototype-setData"><a href="#Page-prototype-setData" class="headerlink" title="Page.prototype.setData()"></a>Page.prototype.setData()</h4><p>setData 函数用于将数据从逻辑层发送到视图层，同时改变对应的 this.data 的值。</p>
<p>注意：</p>
<ol>
<li>直接修改 this.data 无效，无法改变页面的状态，还会造成数据不一致。</li>
<li>单次设置的数据不能超过1024kB，请尽量避免一次设置过多的数据。</li>
</ol>
<p>setData 函数接受一个对象，以 key，value 的形式表示将 this.data 中的 key 对应的值改变成 value。</p>
<p>其中 key 可以非常灵活，以数据路径的形式给出，如 array[2].message，a.b.c.d，并且不需要在 this.data 中预先定义。</p>
<p>例子：</p>
<pre><code>&lt;!--index.wxml--&gt;
&lt;view&gt;{{text}}&lt;/view&gt;
&lt;button bindtap=&quot;changeText&quot;&gt; Change normal data &lt;/button&gt;
&lt;view&gt;{{array[0].text}}&lt;/view&gt;
&lt;button bindtap=&quot;changeItemInArray&quot;&gt; Change Array data &lt;/button&gt;
&lt;view&gt;{{object.text}}&lt;/view&gt;
&lt;button bindtap=&quot;changeItemInObject&quot;&gt; Change Object data &lt;/button&gt;
&lt;view&gt;{{newField.text}}&lt;/view&gt;
&lt;button bindtap=&quot;addNewField&quot;&gt; Add new data &lt;/button&gt;
//index.js
Page({
  data: {
    text: &apos;init data&apos;,
    array: [{text: &apos;init data&apos;}],
    object: {
      text: &apos;init data&apos;
    }
  },
  changeText: function() {
    // this.data.text = &apos;changed data&apos;  // bad, it can not work
    this.setData({
      text: &apos;changed data&apos;
    })
  },
  changeItemInArray: function() {
    // you can use this way to modify a danamic data path
    this.setData({
      &apos;array[0].text&apos;:&apos;changed data&apos;
    })
  },
  changeItemInObject: function(){
    this.setData({
      &apos;object.text&apos;: &apos;changed data&apos;
    });
  },
  addNewField: function() {
    this.setData({
      &apos;newField.text&apos;: &apos;new data&apos;
    })
  }
})
</code></pre><h3 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h3><p>在 JavaScript 文件中声明的变量和函数只在该文件中有效；不同的文件中可以声明相同名字的变量和函数，不会互相影响。通过全局函数 getApp() 可以获取全局的应用实例，如果需要全局的数据可以在 App() 中设置。</p>
<p>我们可以将一些公共的代码抽离成为一个单独的 js 文件，作为一个模块。模块只有通过 module.exports 或者 exports 才能对外暴露接口。</p>
<p>注：</p>
<ul>
<li>exports 是 module.exports 的一个引用，因此在模块里边随意更改 exports 的指向会造成未知的错误。所以更推荐使用 module.exports；</li>
<li>小程序目前不支持直接引入 node_modules , 开发者需要使用到 node_modules 时候可以拷贝出相关的代码到小程序的目录中。</li>
</ul>
<p>例子：</p>
<pre><code>// common.js
function sayHello(name) {
  console.log(`Hello ${name} !`)
}
function sayGoodbye(name) {
  console.log(`Goodbye ${name} !`)
}

module.exports.sayHello = sayHello
exports.sayGoodbye = sayGoodbye
</code></pre><p>​在需要使用这些模块的文件中，使用 require(path) 将公共代码引入:</p>
<pre><code>var common = require(&apos;common.js&apos;)
Page({
  helloMINA: function() {
    common.sayHello(&apos;MINA&apos;)
  },
  goodbyeMINA: function() {
    common.sayGoodbye(&apos;MINA&apos;)
  }
})
</code></pre><h2 id="视图层"><a href="#视图层" class="headerlink" title="视图层"></a>视图层</h2><p>框架的视图层由 WXML 与 WXSS 编写，由组件来进行展示。其中，WXML(WeiXin Markup language)用于描述页面的结构；WXSS(WeiXin Style Sheet)用于描述页面的样式；组件(Component)是视图的基本组成单元。</p>
<h3 id="WXML"><a href="#WXML" class="headerlink" title="WXML"></a>WXML</h3><p>WXML具有数据绑定、列表渲染、条件渲染、模板、事件和引用的功能。</p>
<h4 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h4><p>WXML 中的动态数据均来自对应 Page 的 data。</p>
<p>数据绑定使用Mustache语法（双大括号）将变量包起来，可以作用于：内容、组件属性、控制属性和关键字，其中后三者需要在双引号之内。</p>
<p>作用于关键字的例子：</p>
<pre><code>&lt;checkbox checked=&quot;{{false}}&quot;&gt; &lt;/checkbox&gt;    
</code></pre><ul>
<li><p>true：boolean 类型的 true，代表真值。</p>
</li>
<li><p>false： boolean 类型的 false，代表假值。</p>
</li>
</ul>
<p>注：不要直接写 <code>checked=&quot;false&quot;</code>，其计算结果是一个字符串，转成 boolean 类型后代表真值。</p>
<p>还可在双大括号内进行简单的运算，支持的运算有：三元运算、算数运算、逻辑判断、字符串运算、数据路径运算等。</p>
<p>也可在双大括号内直接进行组合，构成新的对象或者数组。</p>
<p>具体的使用方法可参考官方文档给出的例子。</p>
<h4 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h4><p>在框架中，我们用<code>wx:if</code>来判断是否需要渲染该代码块：</p>
<pre><code>&lt;view wx:if=&quot;{{condition}}&quot;&gt; True &lt;/view&gt;
</code></pre><p>也可以用<code>wx:elif</code> 和 <code>wx:else</code> 来添加一个 else 块：</p>
<pre><code>&lt;view wx:if=&quot;{{length > 5}}&quot;&gt; 1 &lt;/view&gt;
&lt;view wx:elif=&quot;{{length > 2}}&quot;&gt; 2 &lt;/view&gt;
&lt;view wx:else&gt; 3 &lt;/view&gt;
</code></pre><p>因为<code>wx:if</code>是一个控制属性，需要将它添加到一个标签上。但是如果我们想一次性判断多个组件标签，我们可以使用一个<code>&lt;block/&gt;</code> 标签将多个组件包装起来，并在上边使用<code>wx:if</code>控制属性。</p>
<pre><code>&lt;block wx:if=&quot;{{true}}&quot;&gt;
  &lt;view&gt; view1 &lt;/view&gt;
  &lt;view&gt; view2 &lt;/view&gt;
&lt;/block&gt;
</code></pre><p>注意：<code>&lt;block/&gt;</code>并不是一个组件，它仅仅是一个包装元素，不会在页面中做任何渲染，只接受控制属性。</p>
<h4 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h4><p>在组件上使用<code>wx:for</code>控制属性绑定一个数组，即可使用数组中各项的数据重复渲染该组件。默认数组的当前项的下标变量名默认为index，数组当前项的变量名默认为item。使用 <code>wx:for-item</code> 可以指定数组当前元素的变量名，使用<code>wx:for-index</code> 可以指定数组当前下标的变量名。</p>
<p>例子：</p>
<pre><code>&lt;view wx:for=&quot;{{array}}&quot; wx:for-index=&quot;idx&quot; wx:for-item=&quot;itemName&quot;&gt;
  {{idx}}: {{itemName.message}}
&lt;/view&gt;
</code></pre><p>类似block wx:if，也可以将wx:for用在<block>标签上，以渲染一个包含多节点的结构块。</block></p>
<p>如果列表中项目的位置会动态改变或者有新的项目添加到列表中，并且希望列表中的项目保持自己的特征和状态（如<code>&lt;input/&gt;</code> 中的输入内容，<code>&lt;switch/&gt;</code> 的选中状态），需要使用 <code>wx:key</code> 来指定列表中项目的唯一的标识符。</p>
<p><code>wx:key</code> 的值以两种形式提供：</p>
<ul>
<li>字符串，代表在 for 循环的 array 中 item 的某个 property，该 property 的值需要是列表中唯一的字符串或数字，且不能动态改变。</li>
<li>保留关键字 *this 代表在 for 循环中的 item 本身，这种表示需要 item 本身是一个唯一的字符串或者数字。</li>
</ul>
<p>当数据改变触发渲染层重新渲染的时候，会校正带有 key 的组件，框架会确保他们被重新排序，而不是重新创建，以确保使组件保持自身的状态，并且提高列表渲染时的效率。</p>
<p>如不提供 <code>wx:key</code>，会报一个 warning， 如果明确知道该列表是静态，或者不必关注其顺序，可以选择忽略。</p>
<p>示例代码：</p>
<pre><code>&lt;switch wx:for=&quot;{{objectArray}}&quot; wx:key=&quot;unique&quot; style=&quot;display: block;&quot;&gt; {{item.id}} &lt;/switch&gt;
&lt;button bindtap=&quot;switch&quot;&gt; Switch &lt;/button&gt;
&lt;button bindtap=&quot;addToFront&quot;&gt; Add to the front &lt;/button&gt;

&lt;switch wx:for=&quot;{{numberArray}}&quot; wx:key=&quot;*this&quot; style=&quot;display: block;&quot;&gt; {{item}} &lt;/switch&gt;
&lt;button bindtap=&quot;addNumberToFront&quot;&gt; Add to the front &lt;/button&gt;

Page({
  data: {
    objectArray: [
      {id: 5, unique: &apos;unique_5&apos;},
      {id: 4, unique: &apos;unique_4&apos;},
      {id: 3, unique: &apos;unique_3&apos;},
      {id: 2, unique: &apos;unique_2&apos;},
      {id: 1, unique: &apos;unique_1&apos;},
      {id: 0, unique: &apos;unique_0&apos;},
    ],
    numberArray: [1, 2, 3, 4]
  },
  switch: function(e) {
    const length = this.data.objectArray.length
    for (let i = 0; i &lt; length; ++i) {
      const x = Math.floor(Math.random() * length)
      const y = Math.floor(Math.random() * length)
      const temp = this.data.objectArray[x]
      this.data.objectArray[x] = this.data.objectArray[y]
      this.data.objectArray[y] = temp
    }
    this.setData({
      objectArray: this.data.objectArray
    })
  },
  addToFront: function(e) {
    const length = this.data.objectArray.length
    this.data.objectArray = [{id: length, unique: &apos;unique_&apos; + length}].concat(this.data.objectArray)
    this.setData({
      objectArray: this.data.objectArray
    })
  },
  addNumberToFront: function(e){
    this.data.numberArray = [ this.data.numberArray.length + 1 ].concat(this.data.numberArray)
    this.setData({
      numberArray: this.data.numberArray
    })
  }
})
</code></pre><h4 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h4><p>WXML提供模板（template），可以在模板中定义代码片段，然后在不同的地方调用。模板拥有自己的作用域，只能使用data传入的数据。</p>
<p>例子：</p>
<pre><code>//定义模板
&lt;template name=&quot;msgItem&quot;&gt;
  &lt;view&gt;
    &lt;text&gt; {{index}}: {{msg}} &lt;/text&gt;
    &lt;text&gt; Time: {{time}} &lt;/text&gt;
  &lt;/view&gt;
&lt;/template&gt;

//使用模板
&lt;template is=&quot;msgItem&quot; data=&quot;{{...item}}&quot;/&gt;
</code></pre><h4 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h4><h5 id="事件分类"><a href="#事件分类" class="headerlink" title="事件分类"></a>事件分类</h5><p>事件分为冒泡事件和非冒泡事件：</p>
<ul>
<li>冒泡事件：当一个组件上的事件被触发后，该事件会向父节点传递。</li>
<li>非冒泡事件：当一个组件上的事件被触发后，该事件不会向父节点传递。</li>
</ul>
<p>冒泡事件包括：</p>
<ul>
<li>touchstart：手指触摸动作开始；</li>
<li>touchmove：手指触摸后移动；</li>
<li>touchcancel：手指触摸动作被打断，如来电提醒，弹窗；</li>
<li>touchend：手指触摸动作结束；</li>
<li>tap：手指触摸后马上离开；</li>
<li>longtap：手指触摸后，超过350ms再离开。</li>
</ul>
<p>除以上之外的其他组件自定义事件如无特殊申明都是非冒泡事件。</p>
<h5 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h5><p>事件绑定的写法同组件的属性，以 key、value 的形式。</p>
<ul>
<li>key 以bind或catch开头，然后跟上事件的类型，如bindtap, catchtouchstart；</li>
<li>value 是一个字符串，需要在对应的 Page 中定义同名的函数。不然当触发事件的时候会报错。</li>
</ul>
<p>bind事件绑定不会阻止冒泡事件向上冒泡，catch事件绑定可以阻止冒泡事件向上冒泡。</p>
<h5 id="事件对象"><a href="#事件对象" class="headerlink" title="事件对象"></a>事件对象</h5><p>当组件触发事件时，逻辑层绑定该事件的处理函数会收到一个事件对象。</p>
<p><img src="/images/2016-12-9/11.PNG" alt=""></p>
<ul>
<li>type：事件的类型；</li>
<li>timeStamp：页面打开到触发事件所经过的毫秒数；</li>
<li><p>target：触发事件的源组件，包括：</p>
<ul>
<li>id：String，事件源组件的id；</li>
<li>tagName：String，当前组件的类型；</li>
<li>dataset：Object，事件源组件上由data-开头的自定义属性组成的集合。</li>
</ul>
</li>
<li><p>currentTarget：事件绑定的当前组件，属性同target；</p>
</li>
<li><p>touches：是一个数组，每个元素为一个 Touch 对象（canvas 触摸事件中携带的 touches 是 CanvasTouch 数组）。 表示当前停留在屏幕上的触摸点。</p>
<ul>
<li><p>Touch 对象的属性：</p>
<ul>
<li>identifier：Number，触摸点的标识符；</li>
<li>pageX, pageY：Number，距离文档左上角的距离，文档的左上角为原点 ，横向为X轴，纵向为Y轴；</li>
<li>clientX, clientY：Number，距离页面可显示区域（屏幕除去导航条）左上角距离，横向为X轴，纵向为Y轴。</li>
</ul>
</li>
<li><p>CanvasTouch 对象的属性：</p>
<ul>
<li>identifier：Number，触摸点的标识符；</li>
<li>x, y：Number，距离 Canvas 左上角的距离，Canvas 的左上角为原点 ，横向为X轴，纵向为Y轴。</li>
</ul>
</li>
</ul>
</li>
<li><p>changedTouches：数据格式同 touches。 表示有变化的触摸点，如从无变有（touchstart），位置变化（touchmove），从有变无（touchend、touchcancel）。</p>
</li>
<li><p>detail：自定义事件所携带的数据，如表单组件的提交事件会携带用户的输入，媒体的错误事件会携带错误信息等，具体参见官方文档。</p>
</li>
</ul>
<h4 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h4><p>WXML 提供两种文件引用方式import和include。</p>
<ul>
<li>import：可以在该文件中使用目标文件定义的template。import 有作用域的概念，即只会 import 目标文件中定义的 template，而不会 import 目标文件 import 的 template。</li>
<li>include：include可以将目标文件除了<code>&lt;template/&gt;</code>的整个代码引入，相当于是拷贝到include位置。</li>
</ul>
<h3 id="WXSS"><a href="#WXSS" class="headerlink" title="WXSS"></a>WXSS</h3><p>WXSS(WeiXin Style Sheets)是一套样式语言，用于描述 WXML 的组件样式。与 CSS 相比，WXSS扩展的特性有：尺寸单位，样式导入。</p>
<h4 id="尺寸单位"><a href="#尺寸单位" class="headerlink" title="尺寸单位"></a>尺寸单位</h4><ul>
<li>rpx（responsive pixel）: 可以根据屏幕宽度进行自适应。规定屏幕宽为750rpx。如在 iPhone6 上，屏幕宽度为375px，共有750个物理像素，则750rpx = 375px = 750物理像素，1rpx = 0.5px = 1物理像素。</li>
<li>rem（root em）: 规定屏幕宽度为20rem；1rem = (750/20)rpx 。</li>
</ul>
<h4 id="样式导入"><a href="#样式导入" class="headerlink" title="样式导入"></a>样式导入</h4><p>使用<code>@import</code>语句可以导入外联样式表，<code>@import</code>后跟需要导入的外联样式表的相对路径，用;表示语句结束。</p>
<p>例子：</p>
<pre><code>/** common.wxss **/
.small-p {
  padding:5px;
}
/** app.wxss **/
@import &quot;common.wxss&quot;;
.middle-p {
  padding:15px;
}
</code></pre><p>WXSS目前支持的选择器有：<code>.class</code>、<code>#id</code>、<code>element</code>、<code>element, element</code>、<code>::after</code>、<code>::before</code>。</p>
<h2 id="组件和API"><a href="#组件和API" class="headerlink" title="组件和API"></a>组件和API</h2><p>框架为开发者提供了一系列基础组件，开发者可以通过组合这些基础组件进行快速开发。框架提供丰富的微信原生API，可以方便的调起微信提供的能力，如获取用户信息，本地存储，支付功能等。</p>
<p>关于组件和API的详细内容参见<a href="https://mp.weixin.qq.com/debug/wxadoc/dev/component/?t=20161122" target="_blank" rel="external">官方文档</a>.</p>
<p>官方文档阅读完后，就可以进行实际的开发了。对于一个新手来说，自己开发一个微信小程序可能有些难，不过网上有很多微信小程序的开发案例，可以在照着开发案例开发完一个微信小程序后，自己再独立的开发一个属性自己的微信小程序。</p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/微信小程序/">微信小程序</a>
  </div>

</div>



</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2016/12/29/文字循环无缝滚动特效代码/" title="文字循环无缝滚动特效代码">
  <span>
  文字循环无缝滚动特效代码</span>
</a>
</div>


<div class="next">
<a href="/2016/12/07/同一台电脑关联两个或多个Github账号/"  title="同一台电脑关联两个或多个Github账号">
 <span>同一台电脑关联两个或多个Github账号
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2016/12/09/微信小程序开发（一）/" data-title="微信小程序开发（一）" data-url="https://fantasticzhang.github.io/2016/12/09/微信小程序开发（一）/"></div>
</section>


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#微信小程序简介"><span class="toc-number">1.</span> <span class="toc-text">微信小程序简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#小程序注册"><span class="toc-number">2.</span> <span class="toc-text">小程序注册</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#快速体验"><span class="toc-number">3.</span> <span class="toc-text">快速体验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#获取微信小程序的AppID"><span class="toc-number">3.1.</span> <span class="toc-text">获取微信小程序的AppID</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#创建项目"><span class="toc-number">3.2.</span> <span class="toc-text">创建项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#项目结构简介"><span class="toc-number">3.3.</span> <span class="toc-text">项目结构简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#手机预览"><span class="toc-number">3.4.</span> <span class="toc-text">手机预览</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#小程序开发框架"><span class="toc-number">4.</span> <span class="toc-text">小程序开发框架</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#目录结构"><span class="toc-number">4.1.</span> <span class="toc-text">目录结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置"><span class="toc-number">4.2.</span> <span class="toc-text">配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#app-json"><span class="toc-number">4.2.1.</span> <span class="toc-text">app.json</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pages"><span class="toc-number">4.2.1.1.</span> <span class="toc-text">pages</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#window"><span class="toc-number">4.2.1.2.</span> <span class="toc-text">window</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tabBar"><span class="toc-number">4.2.1.3.</span> <span class="toc-text">tabBar</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#networkTimeout"><span class="toc-number">4.2.1.4.</span> <span class="toc-text">networkTimeout</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#debug"><span class="toc-number">4.2.1.5.</span> <span class="toc-text">debug</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#page-json"><span class="toc-number">4.2.2.</span> <span class="toc-text">page.json</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#逻辑层"><span class="toc-number">4.3.</span> <span class="toc-text">逻辑层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#注册程序"><span class="toc-number">4.3.1.</span> <span class="toc-text">注册程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#注册页面"><span class="toc-number">4.3.2.</span> <span class="toc-text">注册页面</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Page-prototype-setData"><span class="toc-number">4.3.2.1.</span> <span class="toc-text">Page.prototype.setData()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模块化"><span class="toc-number">4.3.3.</span> <span class="toc-text">模块化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#视图层"><span class="toc-number">4.4.</span> <span class="toc-text">视图层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#WXML"><span class="toc-number">4.4.1.</span> <span class="toc-text">WXML</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#数据绑定"><span class="toc-number">4.4.1.1.</span> <span class="toc-text">数据绑定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#条件渲染"><span class="toc-number">4.4.1.2.</span> <span class="toc-text">条件渲染</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#列表渲染"><span class="toc-number">4.4.1.3.</span> <span class="toc-text">列表渲染</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#模板"><span class="toc-number">4.4.1.4.</span> <span class="toc-text">模板</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#事件"><span class="toc-number">4.4.1.5.</span> <span class="toc-text">事件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#事件分类"><span class="toc-number">4.4.1.5.1.</span> <span class="toc-text">事件分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#事件绑定"><span class="toc-number">4.4.1.5.2.</span> <span class="toc-text">事件绑定</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#事件对象"><span class="toc-number">4.4.1.5.3.</span> <span class="toc-text">事件对象</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#引用"><span class="toc-number">4.4.1.6.</span> <span class="toc-text">引用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WXSS"><span class="toc-number">4.4.2.</span> <span class="toc-text">WXSS</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#尺寸单位"><span class="toc-number">4.4.2.1.</span> <span class="toc-text">尺寸单位</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#样式导入"><span class="toc-number">4.4.2.2.</span> <span class="toc-text">样式导入</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#组件和API"><span class="toc-number">4.5.</span> <span class="toc-text">组件和API</span></a></li></ol></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">
<div id="authorInfo">
	
		<div class="author-img"></div>		
	
	<div class="social-info" class="clearfix">
		
		<a href="http://weibo.com/jinlingzhang" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/fantasticZhang" target="_blank" class="icon-github" title="github"></a>
		
		
		
		<a href="https://twitter.com/fantastic_zjl" target="_blank" class="icon-twitter" title="twitter"></a>
		
		
		<a href="https://www.facebook.com/fantasticzjl" target="_blank" class="icon-facebook" title="facebook"></a>
		
		
		
		
		
		
		
		<a href="mailto:jlzhanghot@gmail.com" target="_blank" class="icon-email" title="Email Me"></a>
		

	</div>
</div>

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/github/" title="github">github<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/前端/" title="前端">前端<sup>9</sup></a></li>
		  
		
		  
			<li><a href="/categories/生活/" title="生活">生活<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/随记/" title="随记">随记<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/CSS/" title="CSS">CSS<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/js/" title="js">js<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/hexo/" title="hexo">hexo<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Node/" title="Node">Node<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/微信小程序/" title="微信小程序">微信小程序<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://ily11.github.io/" target="_blank" title="ily">ily</a>
            
          </li>
        
          <li>
            
            	<a href="https://airghc.gtensor.com" target="_blank" title="Airghc">Airghc</a>
            
          </li>
        
          <li>
            
            	<a href="http://rain1ove.cn/" target="_blank" title="rain">rain</a>
            
          </li>
        
          <li>
            
            	<a href="https://wisexy.github.io/" target="_blank" title="wisexy">wisexy</a>
            
          </li>
        
    </ul>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
		
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/hsihohuang/kiddochan" target="_blank" title="Kiddochan">Kiddochan</a> © 2017
		
		<a href="/about" target="_blank" title="张金玲">张金玲</a>
		

		</p>
		<!-- <p class="copyright">
		<span id="busuanzi_container_site_pv">
		    本站总访问量<span id="busuanzi_value_site_pv"></span>次，
		</span>
		<span id="busuanzi_container_site_uv">
		  您是第<span id="busuanzi_value_site_uv"></span>个到来的小伙伴
		</span>

		</p> -->
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>
<!--自定义的配置-->
<!-- <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script> -->
<script src="/js/search.js"></script>
<!--相冊功能-->
<script src="/js/jquery.lazyload.js"></script>
<script src="/js/photo.js"></script>

<script type="text/javascript">
$(document).ready(function(){
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
    //2016-11-29
    if($('header nav').hasClass('shownav')){
      $('.animated').css('display', 'block');
    }else {
      $('.animated').css('display', 'none');  //2016-11-29
    }

  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize();
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
      $('.animated').css('display', 'block');   //2016-11-29
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      $('.animated').css('display', 'none');  //2016-11-29
      
      $('#toc.toc-aside').css('display', 'none');
      
      //自定义  固定搜索结果列表宽度
      $('ul.search-result-list').css('width', '82%');
    }
  });
  //自定义事件 让搜索结果与输入框同宽 2016-11-30
  $('#local-search-input').focusin(function(){
    getSize();
    if (myWidth >= 1024) {
        $('ul.search-result-list').css('width', '13.5em');
    }
  })
  $('#local-search-input').focusout(function(){
    getSize();
    if (myWidth >= 1024) {
        $('ul.search-result-list').css('width', '7.4em');
    }
  })
  //自定义 如果初始化时屏幕尺寸小于1024 则根据实际情况显示或隐藏菜单
  getSize();
  if (myWidth < 1024) {
    if($('header nav').hasClass('shownav')){
      $('.animated').css('display', 'block');
    }else {
      $('.animated').css('display', 'none');  //2016-11-29
    }
  }
});

<!--自定义功能：本地搜索-->
var search_path = "search.xml";
     if (search_path.length == 0) {
     	search_path = "search.xml";
     }
     var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');

</script>

<script type="text/javascript">
$(document).ready(function(){
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"fantasticzhang"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }

  //相册功能 2017-02-20 add
  if($(".photos").length) {
      photoInit();
   }
});
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?dacfb28ac21a2d86cfeeda2ea84b20a7";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
